(function(){"use strict";var e={2283:function(e,t,a){var r=a(9242),n=a(3396),l=a(4870),i=a(7139),o=a(797),u=a(3061);const s=e=>((0,n.dD)("data-v-2f9bc590"),e=e(),(0,n.Cn)(),e),c={class:"container"},v={key:0},f={key:1},d={key:2,class:"setting"},h=s((()=>(0,n._)("label",{for:"stocks"},"Stocks count",-1))),p=["max"],g=["width","height"],m=s((()=>(0,n._)("g",{id:"xaxis"},null,-1))),b=s((()=>(0,n._)("g",{id:"yaxis"},null,-1))),w=s((()=>(0,n._)("g",{id:"marks"},null,-1))),_=[m,b,w];var y=(0,n.aZ)({__name:"Chart",setup(e){const t=(0,l.iH)(10),a=(0,u.ibN)("https://raw.githubusercontent.com/plotly/datasets/master/all_stocks_5yr.csv",{immediate:!1});(0,n.bv)((()=>{a.execute()})),(0,n.Ah)((()=>{a.canAbort.value&&a.abort()}));const s=(0,n.Fl)((()=>{if(!a.isFinished.value||null==a.data.value||a.error.value)return;const e=o.ueB(a.data.value);let t=[...o.ruo(e,(e=>e.Name)).entries()];return t.map((e=>({name:e[0],values:e[1].map((e=>({date:new Date(e["date"]),price:parseFloat(e["open"])})))})))})),m=(0,l.iH)(null),b=(0,l.iH)(null),w=(0,u.h4X)(m),y=(0,n.Fl)((()=>Math.floor(o.VV$([1e3,w.width.value])))),k=(0,n.Fl)((()=>600)),x={left:25,top:20,right:20,bottom:25},U=(0,n.Fl)((()=>y.value-x.left-x.right)),O=(0,n.Fl)((()=>k.value-x.top-x.bottom));function F(){if(!s.value)return;if(!b.value)return;console.log(`Rendering chart ${y.value} / ${k.value} - ${t.value} stocks`);const e=o.BYU().domain([0,10]).range([0,U.value]),a=o.BYU().domain([0,10]).range([O.value,0]),r=o.Fp7(s.value,(e=>e.values[e.values.length-1].price))??10,n=o.BYU().domain([0,r]).range([0,10]),l=(o.BYU().domain([0,r]).range([0,10]),t=>t.attr("transform",`translate(${x.left}, ${k.value-x.bottom})`).call(o.LLu(e))),i=e=>e.attr("transform",`translate(${x.left}, ${x.top})`).call(o.y4O(a)),u=o.Ys(b.value).attr("width",y.value).attr("height",k.value);u.select("g#xaxis").call(l),u.select("g#yaxis").call(i);const c=s.value.slice(0,t.value),v=u.select("g#marks").attr("transform",`translate(${x.left}, ${x.top})`);v.selectAll("circle").data(c).join("circle").attr("cx",(t=>e(n(t.values[t.values.length-1].price)))).attr("cy",(t=>e(n(t.values[t.values.length-1].price)))).attr("r",5)}return(0,n.YP)([b,t,s,w.width],(()=>{F()})),(e,o)=>((0,n.wg)(),(0,n.iD)("div",c,[(0,l.SU)(a).isFinished.value?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",v,"Loading stock data")),(0,l.SU)(a).error.value?((0,n.wg)(),(0,n.iD)("div",f,"An error occurred while loading stock data: "+(0,i.zw)((0,l.SU)(a).error.value),1)):(0,n.kq)("",!0),(0,l.SU)(a).isFinished.value?((0,n.wg)(),(0,n.iD)("div",d,[h,(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e),min:"10",max:(0,l.SU)(s)?.size},null,8,p),[[r.nr,t.value,void 0,{lazy:!0}]]),(0,n._)("span",null,"(Total: "+(0,i.zw)((0,l.SU)(s)?.size)+")",1)])):(0,n.kq)("",!0),(0,n._)("div",{id:"divChart",ref_key:"divChart",ref:m},[((0,n.wg)(),(0,n.iD)("svg",{id:"svgChart",ref_key:"svgChart",ref:b,width:(0,l.SU)(y),height:(0,l.SU)(k)},_,8,g))],512)]))}}),k=a(89);const x=(0,k.Z)(y,[["__scopeId","data-v-2f9bc590"]]);var U=x,O=(0,n.aZ)({__name:"App",setup(e){return(e,t)=>((0,n.wg)(),(0,n.j4)(U))}});const F=O;var j=F;(0,r.ri)(j).mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,l){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],l=e[c][2];for(var o=!0,u=0;u<r.length;u++)(!1&l||i>=l)&&Object.keys(a.O).every((function(e){return a.O[e](r[u])}))?r.splice(u--,1):(o=!1,l<i&&(i=l));if(o){e.splice(c--,1);var s=n();void 0!==s&&(t=s)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[r,n,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,l,i=r[0],o=r[1],u=r[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(u)var c=u(a)}for(t&&t(r);s<i.length;s++)l=i[s],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},r=self["webpackChunkd3js_vue_chart"]=self["webpackChunkd3js_vue_chart"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(2283)}));r=a.O(r)})();
//# sourceMappingURL=app.75866d75.js.map